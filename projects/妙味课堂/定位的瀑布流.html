<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>定位的瀑布流效果</title>
<style>
*{ margin:0; padding:0;}
li{ list-style:none;}

#div1{ width:785px; height:auto; margin:20px auto; position:relative;}
li{ position:absolute;}
</style>
</head>
<body>
<div id="div1">
	<ul>
    	<li>
        	<img src="images/pu1.jpg" />
            <p>111111111</p>
        </li>
        <li>
        	<img src="images/pu2.jpg" />
            <p>111111111</p>
        </li>
        <li>
        	<img src="images/pu3.jpg" />
            <p>111111111</p>
        </li>
    	<li>
        	<img src="images/pu4.jpg" />
            <p>111111111</p>
        </li>
        <li>
        	<img src="images/pu5.jpg" />
            <p>111111111</p>
        </li>
        <li>
        	<img src="images/pu6.jpg" />
            <p>111111111</p>
        </li>
        <li>
        	<img src="images/pu9.jpg" />
            <p>111111111</p>
        </li>
    	<li>
        	<img src="images/pu7.jpg" />
            <p>111111111</p>
        </li>
        <li>
        	<img src="images/pu8.jpg" />
            <p>111111111</p>
        </li>
        <li>
        	<img src="images/pu9.jpg" />
            <p>111111111</p>
        </li>
    </ul>
</div>
</body>
<script>
window.onload = function(){

	var aLi = document.getElementsByTagName('li');
	var aHeight = {L:[],C:[],R:[]};

	for(var i=0;i<aLi.length;i++){
		var iNow = i%3;

		switch(iNow){
			case 0:
				aLi[i].style.left = '5px';
				aHeight.L.push(aLi[i].offsetHeight);

				var step = Math.floor(i/3);

				if(!step){
					aLi[i].style.top = 0;
				}
				else{
					var sum = 0;
					for(var j=0;j<step;j++){
						sum += aHeight.L[j] + 5;
					}
					aLi[i].style.top = sum + 'px';
				}

			break;
			case 1:
				aLi[i].style.left = '240px';
				aHeight.C.push(aLi[i].offsetHeight);

				var step = Math.floor(i/3);

				if(!step){
					aLi[i].style.top = 0;
				}
				else{
					var sum = 0;
					for(var j=0;j<step;j++){
						sum += aHeight.C[j] + 5;
					}
					aLi[i].style.top = sum + 'px';
				}
			break;
			case 2:
				aLi[i].style.left = '475px';
				aHeight.R.push(aLi[i].offsetHeight);

				var step = Math.floor(i/3);

				if(!step){
					aLi[i].style.top = 0;
				}
				else{
					var sum = 0;
					for(var j=0;j<step;j++){
						sum += aHeight.R[j] + 5;
					}
					aLi[i].style.top = sum + 'px';
				}
			break;
		}
	}

};
</script>
</html>