<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Demo</title>
<style>
body,ul{ margin: 0; padding: 0; }
li{ list-style: none; }
#wrap{ width: 570px; height: 420px; margin: 50px auto; position: relative;}
.list{ width: 570px; height: 420px; margin: 50px auto; position: absolute; left: 0; top: 0;
		-webkit-perspective:500px; -webkit-transform-style: preserve-3d;}
.list li{ width: 55px; height: 58px; border: 1px solid rgba(0,0,0,0); float: left; background: url(images/1.jpg) no-repeat; background-origin: border-box;
	transition:0.5s background, 0.5s border,0.5s box-shadow,2s 0.3s -webkit-transform,2s 0.3s opacity;}
#wrap input{ width: 60px; height: 60px; border-radius: 50%; position: absolute; top: 100px; cursor: pointer; outline: none;}
#wrap input:nth-of-type(1){ left: -100px; }
#wrap input:nth-of-type(2){ right: -100px; }

.list:nth-of-type(2) li{ background: url(images/2.jpg) no-repeat; }
.list:nth-of-type(3) li{ background: url(images/3.jpg) no-repeat; }
.list:nth-of-type(4) li{ background: url(images/4.jpg) no-repeat; }

</style>
</head>
<body>
<div id="wrap">
<input type="button" value="上一张">
	<ul class="list">
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
	</ul>
	<ul class="list">
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
	</ul>
	<ul class="list">
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
	</ul>
	<ul class="list">
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
	</ul>
<input type="button" value="下一张">
</div>
</body>
<script>
window.onload = function(){

	var oList = document.getElementById("wrap");
	var aUl = oList.getElementsByTagName("ul");
	var aInput = document.getElementsByTagName("input");
	var iRows = oList.offsetHeight/aUl[0].children[0].offsetHeight;
	var iCols = aUl[0].children.length/iRows;

	var oXY = [];
	var inow = 0;

	aInput[1].onclick=function(){

		if(inow >= oXY.length-1){
			return;
		}

		tab(oXY[inow],iRows-1,iCols-1,function(){

			with(this.style){

				borderColor = "rgba(0,0,0,0.8)";
				boxShadow = "0 0 20px blue";
				WebkitTransform = "translate(-50px,-100px) rotateX(-720deg) rotateY(-360deg)";
				opacity = 0;
			}

			if(this.xIndex == 0 && this.yIndex == 0){

				this.addEventListener("webkitTransitionEnd",end,false);
			}

		},50,-1,-1);

		inow++;

	}

	aInput[0].onclick=function(){

		if(inow <= 0){
			return;
		}
		inow--;
		aUl[inow].style.visibility="visible";
		aUl[inow].children[0].removeEventListener("webkitTransitionEnd",end,false);
		tab(oXY[inow],0,0,function(){

			with(this.style){

				transition="0.5s background,1s border,1s box-shadow,1s -webkit-transform,1s opacity";
				borderColor = "rgba(0,0,0,0)";
				boxShadow = "0 0 0 blue";
				WebkitTransform = "translate(0,0) rotateX(0deg) rotateY(0deg)";
				opacity = 1;
			}

		},50,1,1);

	}

	for(var i =0; i<aUl.length; i++){

		var aLi = aUl[i].getElementsByTagName("li");
		aUl[i].style.zIndex = aUl.length - i;
		oXY.push(setXy(aLi,iRows,iCols));
		aUl[i].onclick = (function(a){
			return function(){

				alert(a);
			}
		})(i);
	}
	//console.log(oXY);

}

function end(e){

	//console.log(e,e.type,e.propertyName);
	if(e.propertyName == "transform"){

		this.parentNode.style.visibility="hidden";

	}

}

function tab(arr,x,y,fn,iDelay,iSpeedX,iSpeedY){

	if(!arr[x] || !arr[x][y]){

		return;
	}

	if(fn){

		fn.call(arr[x][y]);

		clearTimeout(arr[x][y].timer);
		arr[x][y].timer = setTimeout(function(){

			tab(arr,x+iSpeedX,y,fn,iDelay,iSpeedX,iSpeedY)
			tab(arr,x,y+iSpeedY,fn,iDelay,iSpeedX,iSpeedY)

		},iDelay);
	}
}

function setXy(objs,iRows,iCols){

	var arr = [];

	for(var i=0; i<iRows; i++){

		var arr2 = [];

		for(var j=0; j<iCols; j++){

			objs[i*iCols+j].yIndex = j;
			objs[i*iCols+j].xIndex = i;

			objs[i*iCols+j].style.backgroundPosition = -(j*55)+"px -" + (i*58) +"px";

			arr2.push(objs[i*iCols+j]);
		}
		arr.push(arr2);
	}

	return arr;
}
</script>
</html>